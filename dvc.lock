schema: '2.0'
stages:
  split:
    cmd: python src/split.py
    deps:
    - path: dataset/data
      hash: md5
      md5: 735891fde4a4ef0c09856aa32e83a8b5.dir
      size: 805843468
      nfiles: 40
    - path: src/split.py
      hash: md5
      md5: 5c1e80c30cf58610b9c968d67ada211b
      size: 2616
    params:
      params.yaml:
        split.box_size: 1024
        split.overlap: 0.2
        split.shuffle_dataset: true
        split.test_path: split/test
        split.test_size: 7
        split.train_path: split/train
        split.train_size: 50
    outs:
    - path: split/dataset_data.json
      hash: md5
      md5: 300904cda8c8ffd89654b2c969bfaa35
      size: 117
  train:
    cmd: python src/train.py
    deps:
    - path: split/dataset_data.json
      hash: md5
      md5: 300904cda8c8ffd89654b2c969bfaa35
      size: 117
    - path: src/train.py
      hash: md5
      md5: 02db6fba308b990231bc66cf172ec320
      size: 4407
    params:
      params.yaml:
        train.batch: 1
        train.epochs: 50
        train.start_model_name: sam_vit_b_01ec64.pth
        variable.run_name: alpha
    outs:
    - path: model/train_data.json
      hash: md5
      md5: 61a22376e37c7549e6a3a3fe436d096d
      size: 192
    - path: plot/train/loss_scores_dict.json
      hash: md5
      md5: c892713a549af3e2f32a9bab4571e385
      size: 5298
  evaluate:
    cmd: python src/evaluate.py
    deps:
    - path: model/train_data.json
      hash: md5
      md5: 61a22376e37c7549e6a3a3fe436d096d
      size: 192
    - path: src/evaluate.py
      hash: md5
      md5: 437fd71066fb042374b903cf095a3607
      size: 3432
    outs:
    - path: eval/metrics.json
      hash: md5
      md5: 8e93d214f8fe98fe0b9757a58049b349
      size: 129
  infer:
    cmd: python src/infer.py
    deps:
    - path: model/train_data.json
      hash: md5
      md5: 61a22376e37c7549e6a3a3fe436d096d
      size: 192
    - path: src/infer.py
      hash: md5
      md5: b8dfe3b9a22ed24a107d64c829bd54c2
      size: 2567
    outs:
    - path: plot/infer/one.png
      hash: md5
      md5: 1d7cfadf4988d03f9d1632b8758cafbc
      size: 2500878
    - path: plot/infer/three.png
      hash: md5
      md5: 24a3cc95eda1ffe4876f292a4841a5ba
      size: 2641981
    - path: plot/infer/two.png
      hash: md5
      md5: e2aed007348dd8a403a041f3b10cccb9
      size: 2413128
