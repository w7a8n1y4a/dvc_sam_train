schema: '2.0'
stages:
  split:
    cmd: python src/split.py
    deps:
    - path: dataset/data
      hash: md5
      md5: 735891fde4a4ef0c09856aa32e83a8b5.dir
      size: 805843468
      nfiles: 40
    - path: src/split.py
      hash: md5
      md5: 03114f5bbe1dea1bf60e113a44bc693d
      size: 2642
    params:
      params.yaml:
        split.box_size: 1024
        split.overlap: 0.2
        split.shuffle_dataset: true
        split.test_path: split/test
        split.test_size: 2
        split.train_path: split/train
        split.train_size: 20
    outs:
    - path: split/dataset_data.json
      hash: md5
      md5: 213a094d0909153f9e8d4627e02a4a0d
      size: 117
  train:
    cmd: python src/train.py
    deps:
    - path: split/dataset_data.json
      hash: md5
      md5: 213a094d0909153f9e8d4627e02a4a0d
      size: 117
    - path: src/train.py
      hash: md5
      md5: 3024cf020179c7077afd94bf1a1ddb65
      size: 4427
    params:
      params.yaml:
        train.batch: 1
        train.epochs: 50
        train.start_model_name: sam_vit_b_01ec64.pth
        variable.run_name: alpha
    outs:
    - path: model/train_data.json
      hash: md5
      md5: 772208ae3f923a65ea4f6babaf865fb1
      size: 192
    - path: plot/train/loss_scores_dict.json
      hash: md5
      md5: de61799ecd9bb5adb04e77e268204b02
      size: 5305
  evaluate:
    cmd: python src/evaluate.py
    deps:
    - path: model/train_data.json
      hash: md5
      md5: 772208ae3f923a65ea4f6babaf865fb1
      size: 192
    - path: src/evaluate.py
      hash: md5
      md5: 7adc5372d5fb4238f28b1248b0f244c4
      size: 3461
    outs:
    - path: eval/metrics.json
      hash: md5
      md5: 6f48493ed88319377a10778b4b88728b
      size: 129
  infer:
    cmd: python src/infer.py
    deps:
    - path: model/train_data.json
      hash: md5
      md5: 772208ae3f923a65ea4f6babaf865fb1
      size: 192
    - path: src/infer.py
      hash: md5
      md5: b7b521950ec3c4d91cd9f85a57f7e399
      size: 2547
    outs:
    - path: plot/infer/one.png
      hash: md5
      md5: 9448e28c5aaad3d6b5619c5cd5321a9e
      size: 3238869
    - path: plot/infer/three.png
      hash: md5
      md5: e935a1be357e96f6f7eafd20b019ae62
      size: 2269875
    - path: plot/infer/two.png
      hash: md5
      md5: 04c4e55cf8029703f1e46462113ed4e8
      size: 3001266
